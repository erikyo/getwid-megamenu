.wp-block-megamenu {

	.wp-block-megamenu-item {

		&.has-child {
			cursor: pointer;
		}

		/**
		 *  Dropdown
		 */
		&__dropdown {
			position: absolute;
			z-index: 1001;
			top: 100%;
			left: 0;
			right: 0;

			overflow: hidden;
			max-height: 0;
			width: 100%;

			opacity: 0;
			height: auto;
			background: var(--wp--preset--color--white);
			box-shadow: 0 5px 30px -20px rgba(0, 0, 0, 1);
			box-sizing: border-box;

			&:after,
			&:before {
				display: table;
				content: '';
				clear: both;
			}
		}

		&.is-opened {
			overflow: visible;

			.wp-block-megamenu-item__dropdown {
				overflow: visible;
				height: auto;
				max-height: 100vh;
				opacity: 1;
			}
		}


		/**
		 *  the menu item link (or text, if the menu has not a link)
		 */
		&__link {
			padding: 10px 15px;
			// the chevron icon is 24px height so we need to make the line-height at least 24px to avoid misalignment
			min-height: 24px;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		/**
		 * the chevron icon
		 */
		&__toggle {
			display: block;
			padding: 0;
			background: transparent;
			border: 0;
			box-shadow: none;
			color: inherit;
			margin: 0;
			outline: none;

			&:active,
			&:focus {
				outline: none;
				text-decoration: none;
			}

			&:hover {
				text-decoration: none;
				color: inherit;
				background: inherit;
				box-shadow: none;
			}
		}
	}

	.wp-block-megamenu-item {

		&.has-child {
			cursor: pointer;
		}

		/**
		 *  Dropdown
		 */
		&__dropdown {
			position: absolute;
			z-index: 1001;
			top: 100%;
			left: 0;
			right: 0;

			overflow: hidden;
			max-height: 0;
			width: 100%;

			opacity: 0;
			height: auto;
			background: var(--wp--preset--color--white);
			box-shadow: 0 8px 40px -30px rgba(0, 0, 0, 1);
			box-sizing: border-box;

			&:after,
			&:before {
				display: table;
				content: '';
				clear: both;
			}
		}

		&.is-opened {
			.wp-block-megamenu-item__dropdown {
				overflow: visible;
				max-height: 100vh;
				opacity: 1;
			}
		}
	}

	/**
	 * The menu in desktop mode
	 */
	&:not(.is-mobile) {
		.wp-block-megamenu-item {
			&.is-opened {
				.wp-block-megamenu-item__dropdown {
					height: auto;
					opacity: 1;
				}
			}
		}
	}

	/**
	 * The menu in mobile mode
	 */
	&.is-mobile {

		&,
		.wp-block-megamenu-item__dropdown {
			position: absolute;
			top: 0;
			left: 0;
			z-index: 1002;
			max-width: 100vw;
			display: flex;
			align-items: center;
			justify-content: center;
			overflow: hidden;

			.wp-block-megamenu-menu {
				width: 100vw;
				height: 100vh;
				justify-content: center;
				box-sizing: border-box;
				padding: var( --megamenu--responsive--internal-padding, ($burger-size * 2) ($burger-size * 1.5) ($burger-size * .5) var(--wp--style--root--padding-left) ) !important;
				opacity: 0;
				transition: 350ms transform, 100ms opacity;
				transform: translateX(100%);
			}
		}

		&.is-opened .wp-block-megamenu-menu {
			transform: translateX(0);
			opacity: 1;
		}

		& .wp-block-megamenu-item.is-opened {
			.wp-block-megamenu-item__dropdown {
				z-index: 1003;
				transform: translateX(0);
				opacity: 1;
				min-height: 100%;
				max-height: inherit;
			}
		}

		// fill the height of the menu witht the content
		.wp-block-megamenu-menu > .is-layout-flex {
			height: 100%;
			align-content: space-between;
		}

		.wp-block-megamenu-item {
			width: 100%;
		}
	}
}
